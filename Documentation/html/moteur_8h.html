<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TP_AAA: D:/TP_TD_ENSEA_3A/AUTO/2425_ESE3745_BELKHIR_LY/stm32Projet/Core/Inc/mylibs/moteur.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TP_AAA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_275089585c7fc1b5fd5d7d42c69cb1da.html">D:</a></li><li class="navelem"><a class="el" href="dir_465ae9aeb27c4c9a4ee002f09b6811a7.html">TP_TD_ENSEA_3A</a></li><li class="navelem"><a class="el" href="dir_06c4035a5976002d8d67802f0620e971.html">AUTO</a></li><li class="navelem"><a class="el" href="dir_04a0c3f17c08be1bd09bb4d2956dfd6b.html">2425_ESE3745_BELKHIR_LY</a></li><li class="navelem"><a class="el" href="dir_6b66847eacc880f6e53247c0470d14a5.html">stm32Projet</a></li><li class="navelem"><a class="el" href="dir_4a5d4a458c5dc55b3f2779c2b728fed7.html">Core</a></li><li class="navelem"><a class="el" href="dir_ca6f21f4b8ddd472c81eba92c5fe21e7.html">Inc</a></li><li class="navelem"><a class="el" href="dir_021471dc3aad2adbae2c9b4a911aed04.html">mylibs</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">moteur.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Interface de contrôle du moteur, permettant de démarrer, arrêter, et ajuster la vitesse du moteur via des signaux PWM.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;tim.h&quot;</code><br />
</div>
<p><a href="moteur_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_i_d__parameter__t.html">PID_parameter_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure contenant les paramètres du régulateur PID.  <a href="struct_p_i_d__parameter__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad89cd130c64cf199461b25ce74f5d6c7" id="r_ad89cd130c64cf199461b25ce74f5d6c7"><td class="memItemLeft" align="right" valign="top"><a id="ad89cd130c64cf199461b25ce74f5d6c7" name="ad89cd130c64cf199461b25ce74f5d6c7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ALPHA_MAX</b>&#160;&#160;&#160;(TIM1-&gt;ARR)</td></tr>
<tr class="memdesc:ad89cd130c64cf199461b25ce74f5d6c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Valeur maximale du rapport cyclique PWM (correspond à 100%). <br /></td></tr>
<tr class="separator:ad89cd130c64cf199461b25ce74f5d6c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae09b82e8938239b2cc7d928387482ada" id="r_ae09b82e8938239b2cc7d928387482ada"><td class="memItemLeft" align="right" valign="top"><a id="ae09b82e8938239b2cc7d928387482ada" name="ae09b82e8938239b2cc7d928387482ada"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ALPHA_MIN</b>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ae09b82e8938239b2cc7d928387482ada"><td class="mdescLeft">&#160;</td><td class="mdescRight">Valeur minimale du rapport cyclique PWM (correspond à 0%). <br /></td></tr>
<tr class="separator:ae09b82e8938239b2cc7d928387482ada"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a732bfae1d2f366c630382d471bb7257e" id="r_a732bfae1d2f366c630382d471bb7257e"><td class="memItemLeft" align="right" valign="top"><a id="a732bfae1d2f366c630382d471bb7257e" name="a732bfae1d2f366c630382d471bb7257e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ALPHA_0</b>&#160;&#160;&#160;(<a class="el" href="#ad89cd130c64cf199461b25ce74f5d6c7">ALPHA_MAX</a> / 2)</td></tr>
<tr class="memdesc:a732bfae1d2f366c630382d471bb7257e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Valeur moyenne du rapport cyclique PWM (correspond à 50%). <br /></td></tr>
<tr class="separator:a732bfae1d2f366c630382d471bb7257e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afba35bbcedf3793b354746b6ccfb8f22" id="r_afba35bbcedf3793b354746b6ccfb8f22"><td class="memItemLeft" align="right" valign="top"><a id="afba35bbcedf3793b354746b6ccfb8f22" name="afba35bbcedf3793b354746b6ccfb8f22"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>VITESSE_MAX</b>&#160;&#160;&#160;3000</td></tr>
<tr class="memdesc:afba35bbcedf3793b354746b6ccfb8f22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Vitesse maximale définie pour le moteur, exprimée RPM . <br /></td></tr>
<tr class="separator:afba35bbcedf3793b354746b6ccfb8f22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a602abb8ec84dcb3b6f854a738310ea46" id="r_a602abb8ec84dcb3b6f854a738310ea46"><td class="memItemLeft" align="right" valign="top"><a id="a602abb8ec84dcb3b6f854a738310ea46" name="a602abb8ec84dcb3b6f854a738310ea46"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ADC_BUFFER_SIZE</b>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a602abb8ec84dcb3b6f854a738310ea46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Taille du tampon ADC utilisé pour les conversions en mode DMA. <br /></td></tr>
<tr class="separator:a602abb8ec84dcb3b6f854a738310ea46"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad6b818c4839a7c2cddfb1d00dbf56b9d" id="r_ad6b818c4839a7c2cddfb1d00dbf56b9d"><td class="memItemLeft" align="right" valign="top"><a id="ad6b818c4839a7c2cddfb1d00dbf56b9d" name="ad6b818c4839a7c2cddfb1d00dbf56b9d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>moteurStart</b> (void)</td></tr>
<tr class="memdesc:ad6b818c4839a7c2cddfb1d00dbf56b9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Démarre le moteur avec un rapport cyclique initial de 50%. <br /></td></tr>
<tr class="separator:ad6b818c4839a7c2cddfb1d00dbf56b9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d0e303e234c350d342e0e523c716dee" id="r_a3d0e303e234c350d342e0e523c716dee"><td class="memItemLeft" align="right" valign="top"><a id="a3d0e303e234c350d342e0e523c716dee" name="a3d0e303e234c350d342e0e523c716dee"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>moteurStop</b> (void)</td></tr>
<tr class="memdesc:a3d0e303e234c350d342e0e523c716dee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arrête le moteur en fixant le rapport cyclique à 0%. <br /></td></tr>
<tr class="separator:a3d0e303e234c350d342e0e523c716dee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb163b2eaa21085ca1efa176e5fede2f" id="r_abb163b2eaa21085ca1efa176e5fede2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abb163b2eaa21085ca1efa176e5fede2f">moteurSetSpeed</a> (char *cmd)</td></tr>
<tr class="memdesc:abb163b2eaa21085ca1efa176e5fede2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ajuste la vitesse du moteur en fonction de la commande reçue.  <br /></td></tr>
<tr class="separator:abb163b2eaa21085ca1efa176e5fede2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03473b1460cd766771c91e5ed5e75be9" id="r_a03473b1460cd766771c91e5ed5e75be9"><td class="memItemLeft" align="right" valign="top"><a id="a03473b1460cd766771c91e5ed5e75be9" name="a03473b1460cd766771c91e5ed5e75be9"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>displayCurrent</b> (void)</td></tr>
<tr class="memdesc:a03473b1460cd766771c91e5ed5e75be9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Affiche le courant mesuré par l'ADC sur la console. <br /></td></tr>
<tr class="separator:a03473b1460cd766771c91e5ed5e75be9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec108e3ac581caa34a55f842a672bf92" id="r_aec108e3ac581caa34a55f842a672bf92"><td class="memItemLeft" align="right" valign="top"><a id="aec108e3ac581caa34a55f842a672bf92" name="aec108e3ac581caa34a55f842a672bf92"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>encodeurStart</b> (void)</td></tr>
<tr class="memdesc:aec108e3ac581caa34a55f842a672bf92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Démarre l'encodeur pour mesurer la position et la vitesse du moteur. <br /></td></tr>
<tr class="separator:aec108e3ac581caa34a55f842a672bf92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e13d5e804153755eac47dab3aed5b63" id="r_a5e13d5e804153755eac47dab3aed5b63"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5e13d5e804153755eac47dab3aed5b63">getCurrent</a> (void)</td></tr>
<tr class="memdesc:a5e13d5e804153755eac47dab3aed5b63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calcule et retourne le courant mesuré par l'ADC.  <br /></td></tr>
<tr class="separator:a5e13d5e804153755eac47dab3aed5b63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a647f18f75ad8f9c01bca1be5e47b706b" id="r_a647f18f75ad8f9c01bca1be5e47b706b"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a647f18f75ad8f9c01bca1be5e47b706b">getSpeed</a> (int16_t oldpos)</td></tr>
<tr class="memdesc:a647f18f75ad8f9c01bca1be5e47b706b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calcule et retourne la vitesse du moteur en tours par minute (RPM).  <br /></td></tr>
<tr class="separator:a647f18f75ad8f9c01bca1be5e47b706b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaa4be128fe3cf007506a431e945855a" id="r_adaa4be128fe3cf007506a431e945855a"><td class="memItemLeft" align="right" valign="top"><a id="adaa4be128fe3cf007506a431e945855a" name="adaa4be128fe3cf007506a431e945855a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ADC_DMA_Init</b> (void)</td></tr>
<tr class="memdesc:adaa4be128fe3cf007506a431e945855a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise l'ADC en mode DMA avec un déclenchement périodique par TIMER. <br /></td></tr>
<tr class="separator:adaa4be128fe3cf007506a431e945855a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ba1ef74f949a7707be330bcd1c98f61" id="r_a9ba1ef74f949a7707be330bcd1c98f61"><td class="memItemLeft" align="right" valign="top"><a id="a9ba1ef74f949a7707be330bcd1c98f61" name="a9ba1ef74f949a7707be330bcd1c98f61"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>displaySpeed</b> (void)</td></tr>
<tr class="memdesc:a9ba1ef74f949a7707be330bcd1c98f61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Affiche la vitesse du moteur calculée sur la console. <br /></td></tr>
<tr class="separator:a9ba1ef74f949a7707be330bcd1c98f61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae32de4a248b0327eaa5786caa64a68bf" id="r_ae32de4a248b0327eaa5786caa64a68bf"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae32de4a248b0327eaa5786caa64a68bf">getPos</a> (void)</td></tr>
<tr class="memdesc:ae32de4a248b0327eaa5786caa64a68bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retourne la position actuelle du moteur à partir de l'encodeur.  <br /></td></tr>
<tr class="separator:ae32de4a248b0327eaa5786caa64a68bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Interface de contrôle du moteur, permettant de démarrer, arrêter, et ajuster la vitesse du moteur via des signaux PWM. </p>
<dl class="section author"><dt>Author</dt><dd>Aliou LY </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2024-11-11</dd></dl>
<p>Ce fichier fournit les constantes, structures et prototypes nécessaires pour contrôler un moteur. Le moteur est contrôlé par un signal PWM, et des fonctions supplémentaires permettent de mesurer le courant, la position et la vitesse du moteur.</p>
<dl class="section note"><dt>Note</dt><dd>Ce fichier doit être utilisé avec le fichier d'implémentation <code>moteur.c</code>. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a5e13d5e804153755eac47dab3aed5b63" name="a5e13d5e804153755eac47dab3aed5b63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e13d5e804153755eac47dab3aed5b63">&#9670;&#160;</a></span>getCurrent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float getCurrent </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calcule et retourne le courant mesuré par l'ADC. </p>
<dl class="section return"><dt>Returns</dt><dd>La valeur du courant mesuré en ampères. </dd></dl>

</div>
</div>
<a id="ae32de4a248b0327eaa5786caa64a68bf" name="ae32de4a248b0327eaa5786caa64a68bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae32de4a248b0327eaa5786caa64a68bf">&#9670;&#160;</a></span>getPos()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t getPos </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retourne la position actuelle du moteur à partir de l'encodeur. </p>
<dl class="section return"><dt>Returns</dt><dd>La position actuelle du moteur. </dd></dl>

</div>
</div>
<a id="a647f18f75ad8f9c01bca1be5e47b706b" name="a647f18f75ad8f9c01bca1be5e47b706b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a647f18f75ad8f9c01bca1be5e47b706b">&#9670;&#160;</a></span>getSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float getSpeed </td>
          <td>(</td>
          <td class="paramtype">int16_t</td>          <td class="paramname"><span class="paramname"><em>oldpos</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calcule et retourne la vitesse du moteur en tours par minute (RPM). </p>
<p>Cette fonction utilise une position précédente pour calculer la vitesse actuelle.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oldpos</td><td>La dernière position connue du moteur. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>La vitesse du moteur en RPM. </dd></dl>

</div>
</div>
<a id="abb163b2eaa21085ca1efa176e5fede2f" name="abb163b2eaa21085ca1efa176e5fede2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb163b2eaa21085ca1efa176e5fede2f">&#9670;&#160;</a></span>moteurSetSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void moteurSetSpeed </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>cmd</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ajuste la vitesse du moteur en fonction de la commande reçue. </p>
<p>Cette fonction prend une commande sous forme de chaîne de caractères, la convertit en valeur numérique, et ajuste la vitesse du moteur via le PWM.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>La commande de vitesse sous forme de chaîne de caractères. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
